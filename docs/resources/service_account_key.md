---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "stackit_service_account_key Resource - stackit"
subcategory: ""
description: |-
  Schema for a STACKIT service account access token resource.
  ~> This resource is in beta and may be subject to breaking changes in the future. Use with caution. See our guide https://registry.terraform.io/providers/stackitcloud/stackit/latest/docs/guides/opting_into_beta_resources for how to opt-in to use beta resources.
  Example Usage
  Automatically rotate access tokens
  
  resource "stackit_service_account" "sa" {
    project_id = var.stackit_project_id
    name = "sa01"
  }
  
  resource "time_rotating" "rotate" {
    rotation_days = 80
  }
  
  // The access token for the Stackit service account is set to be valid for 180 days (ttl_days).
  // However, it is configured to rotate after 80 days whenever a Terraform apply is triggered.
  // This rotation policy enhances security by ensuring tokens are refreshed regularly, 
  // even before they expire, mitigating potential security risks associated with long-lived tokens.
  resource "stackit_service_account_access_token" "sa1" {
    project_id              = var.stackit_project_id
    service_account_email   = stackit_service_account.sa.email
    ttl_days                = 180
  
    // The token rotation is linked to the time_rotating resource.
    // Whenever the time_rotating resource changes, it triggers a rotation of this access token.
    rotate_when_changed = {
      rotation = time_rotating.rotate.id
    }
  }
---

# stackit_service_account_key (Resource)

Schema for a STACKIT service account access token resource.

~> This resource is in beta and may be subject to breaking changes in the future. Use with caution. See our [guide](https://registry.terraform.io/providers/stackitcloud/stackit/latest/docs/guides/opting_into_beta_resources) for how to opt-in to use beta resources.
## Example Usage


### Automatically rotate access tokens
```terraform
resource "stackit_service_account" "sa" {
  project_id = var.stackit_project_id
  name = "sa01"
}

resource "time_rotating" "rotate" {
  rotation_days = 80
}

// The access token for the Stackit service account is set to be valid for 180 days (ttl_days).
// However, it is configured to rotate after 80 days whenever a Terraform apply is triggered.
// This rotation policy enhances security by ensuring tokens are refreshed regularly, 
// even before they expire, mitigating potential security risks associated with long-lived tokens.
resource "stackit_service_account_access_token" "sa1" {
  project_id              = var.stackit_project_id
  service_account_email   = stackit_service_account.sa.email
  ttl_days                = 180

  // The token rotation is linked to the time_rotating resource.
  // Whenever the time_rotating resource changes, it triggers a rotation of this access token.
  rotate_when_changed = {
    rotation = time_rotating.rotate.id
  }
}

```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `project_id` (String) STACKIT project ID associated with the service account token.
- `service_account_email` (String) Email address linked to the service account.

### Optional

- `rotate_when_changed` (Map of String) A map of arbitrary key/value pairs that will force recreation of the token when they change, enabling token rotation based on external conditions such as a rotating timestamp. Changing this forces a new resource to be created.
- `ttl_days` (Number)

### Read-Only

- `audience` (String)
- `created_at` (String) Timestamp indicating when the access token was created.
- `id` (String) Unique internal resource ID for Terraform, formatted as "project_id,key_id".
- `issuer` (String)
- `key_algorithm` (String)
- `key_id` (String) Identifier for the key linked to the service account.
- `key_origin` (String)
- `key_type` (String)
- `kid` (String)
- `private_key` (String, Sensitive)
- `public_key` (String)
- `raw_response` (String, Sensitive)
- `subject` (String)
- `valid_until` (String) Specifies the key's validity duration in days. If unspecified, key is valid until deleted.
